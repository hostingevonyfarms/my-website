<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hosting Evony Farms</title>
  <style>
    /* ======================= */
    /* أنماط الصفحة الرئيسية الموجودة مسبقًا */
    /* ======================= */
    body { font-family: Arial, sans-serif; background-color: #f4f4f9; margin: 0; padding: 0; } 
    .header { text-align: center; background-color: #333; color: white; padding: 10px; } 
    .header button { background-color: #007BFF; border: none; padding: 10px; color: white; cursor: pointer; margin: 5px; border-radius: 5px; transition: background-color 0.3s ease; } 
    .header button:hover { background-color: #0056b3; } 
    /* حاويات الأقسام العامة */
    .groups-wrapper {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 20px;
      padding: 20px;
    }
    .group-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }
    .list-container {
      width: 300px;
      background: white;
      border: 1px solid #ccc;
      border-radius: 15px;
      padding: 15px;
      overflow-y: auto;
      max-height: 350px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    .list-container h3 { font-size: 14px; text-align: center; } 
    .list-container input { width: 100%; margin-bottom: 10px; padding: 5px; font-size: 12px; } 
    .item { margin: 5px 0; padding: 5px; cursor: pointer; border-radius: 15px; background-color: rgba(0, 123, 255, 0.3); color: #333; } 
    .item:hover { background: rgba(0, 123, 255, 0.5); } 
    .selected { background-color: rgba(0, 123, 255, 0.7); color: white; } 
    .excluded { background-color: rgba(255, 0, 0, 0.5); color: white; } 
    .main-general { background-color: rgba(76, 175, 80, 0.3); color: #333; } 
    .assistant-general { background-color: rgba(255, 193, 7, 0.3); color: #333; } 
    .search-box { margin-bottom: 10px; }
    .farming-message { text-align: center; padding: 20px; }
    .event-monsters-message { text-align: center; padding: 20px; }
    .event-button { background-color: #FFA500; margin: 5px; padding: 10px; color: white; border: none; border-radius: 5px; transition: background-color 0.3s ease; cursor: pointer; }
    .event-button:hover { background-color: #d48a00; }
    .event-page-button { background-color: #8A2BE2; margin: 5px; padding: 10px; color: white; border: none; border-radius: 5px; transition: background-color 0.3s ease; cursor: pointer; }
    .event-page-button:hover { background-color: #6a0dad; }
    .hidden { display: none; }
    .event-buttons-container { margin-top: 20px; }
    .event-monster-card { width: 150px; height: 150px; background: rgba(0, 123, 255, 0.7); border: 1px solid #ccc; border-radius: 15px; padding: 10px; display: flex; flex-direction: column; align-items: center; justify-content: space-between; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); margin-top: 15px; }
    .event-monster-card h3 { margin: 0; font-size: 14px; font-weight: bold; }
    .event-monster-card .level-select { width: 100%; appearance: none; background: rgba(240, 240, 240, 0.7); padding: 5px; border: none; border-radius: 5px; }
    .event-monster-card .level-select option { padding: 5px; }
    .excluded-event-monster-card { width: 150px; height: 150px; background: rgba(255, 0, 0, 0.5); border: 1px solid #ccc; border-radius: 15px; padding: 10px; display: flex; flex-direction: column; align-items: center; justify-content: space-between; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); margin-top: 15px; }
    .excluded-event-monster-card h3 { margin: 0; font-size: 14px; font-weight: bold; }
    .excluded-event-monster-card .excluded-levels { margin-top: 10px; }
    .excluded-level-item { margin: 5px 0; padding: 5px; cursor: pointer; border-radius: 5px; background-color: rgba(220, 53, 69, 0.5); color: white; }
    .excluded-level-item:hover { background-color: rgba(200, 35, 50, 0.5); }
    .event-row { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; margin-bottom: 20px; }
    .message { text-align: center; margin-top: 20px; font-size: 14px; color: #555; }
    .rally-message { text-align: center; margin-top: 20px; font-size: 14px; color: #555; margin-bottom: 10px; }
    .food-wood-container { display: flex; justify-content: space-between; align-items: flex-start; margin-top: 20px; max-width: 600px; margin-left: auto; margin-right: auto; }
    .food-container, .wood-container, .iron-container, .stone-container { width: 45%; background: white; border: 1px solid #ccc; border-radius: 15px; padding: 15px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); }
    .food-container h3, .wood-container h3, .iron-container h3, .stone-container h3 { font-size: 14px; text-align: center; margin-bottom: 10px; }
    .level-input-container { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
    .level-input-container label { display: inline-block; width: 100px; margin-right: 10px; vertical-align: middle; }
    .level-input-container input[type="number"] { width: 100px; padding: 5px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
    .level-input-container input[type="number"]:focus { border-color: #007BFF; outline: none; }
    .level-input-container input[type="number"]:valid { border-color: green; }
    .default-march-container { display: flex; justify-content: center; align-items: center; margin-top: 10px; }
    .default-march-container label { display: inline-block; margin-right: 10px; vertical-align: middle; }
    .default-march-container input[type="checkbox"] { vertical-align: middle; }
    .server-number-container { width: 100%; max-width: 400px; background: white; border: 1px solid #ccc; border-radius: 15px; padding: 15px; margin-top: 20px; margin-left: auto; margin-right: auto; }
    .server-number-container label { display: block; margin-bottom: 5px; font-weight: bold; text-align: center; }
    .server-number-input-container { display: flex; justify-content: space-between; align-items: center; }
    .server-number-input-container label { display: inline-block; width: 100px; margin-right: 10px; vertical-align: middle; }
    .server-number-input-container input[type="number"] { width: 100px; padding: 5px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
    .server-number-input-container input[type="number"]:focus { border-color: #007BFF; outline: none; }
    .server-number-input-container input[type="number"]:invalid { border-color: red; }
    .server-number-input-container .error-message { color: red; font-size: 12px; display: none; }
    .resource-type-container { width: 100%; max-width: 400px; background: white; border: 1px solid #ccc; border-radius: 15px; padding: 15px; margin-top: 20px; margin-left: auto; margin-right: auto; }
    .resource-type-container label { display: block; margin-bottom: 5px; font-weight: bold; text-align: center; }
    .resource-type-input-container { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
    .resource-type-input-container label { display: inline-block; width: 100px; margin-right: 10px; vertical-align: middle; }
    .resource-type-input-container input[type="range"] { width: 200px; }
    .resource-type-input-container .resource-value { display: inline-block; width: 50px; text-align: center; vertical-align: middle; margin-left: 10px; }
    .coordinates-container { width: 100%; max-width: 400px; background: white; border: 1px solid #ccc; border-radius: 15px; padding: 15px; margin-top: 20px; margin-left: auto; margin-right: auto; }
    .coordinates-container label { display: block; margin-bottom: 5px; font-weight: bold; text-align: center; }
    .coordinates-input-container { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
    .coordinates-input-container label { display: inline-block; width: 100px; margin-right: 10px; vertical-align: middle; }
    .coordinates-input-container input[type="text"] { width: 100px; padding: 5px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
    .coordinates-input-container input[type="text"]:focus { border-color: #007BFF; outline: none; }
    .coordinates-input-container input[type="text"]:valid { border-color: green; }
    .save-button {
      background-color: #28a745;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      margin-top: 15px;
      cursor: pointer;
      font-size: 14px;
    }
    .save-button:hover {
      background-color: #218838;
    }
    /* ======================= */
    /* أنماط قسم Troop Training */
    /* ======================= */
    .troop-training-content {
      text-align: center;
      padding: 20px;
    }
    .troop-type-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      margin-top: 20px;
    }
    .troop-type {
      background: white;
      border: 1px solid #ccc;
      border-radius: 15px;
      padding: 15px;
      width: 220px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .troop-type h3 { margin-top: 0; }
    .troop-type label { display: block; margin: 10px 0 5px; font-size: 14px; }
    .troop-type input[type="range"] { width: 100%; }
    .troop-type input[type="number"] {
      width: 100%;
      padding: 5px;
      border: 1px solid #ccc;
      border-radius: 25px;
      text-align: center;
      margin-top: 5px;
    }
    #totalTroopsLabel {
      font-weight: bold;
      font-size: 16px;
      margin-bottom: 10px;
      display: block;
    }
    /* ======================= */
    /* أنماط قسم Black Market & Commodities (المضاف بجانب Troop Training) */
    /* ======================= */
    h2 {
      text-align: center;
      margin-bottom: 20px;
      font-size: 20px;
    }
    h3 {
      text-align: center;
      margin-top: 40px;
      margin-bottom: 20px;
      font-size: 18px;
    }
    .product-container,
    .commodity-container {
      display: grid;
      grid-template-columns: repeat(6, 200px);
      gap: 20px;
      justify-content: center;
      margin-bottom: 30px;
    }
    .box {
      width: 200px;
      height: 200px;
      background: #fff;
      border-radius: 20px;
      padding: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .item {
      display: flex;
      align-items: center;
      margin: 5px 0;
      font-size: 16px;
    }
    .input-item input[type="text"] {
      width: 100%;
      padding: 5px 10px;
      font-size: 16px;
      border: 1px solid #90a4ae;
      outline: none;
      border-radius: 20px;
      background-color: #fff;
    }
    .text-only .text-label {
      background-color: #ffcc80;
      padding: 5px 10px;
      border-radius: 50px;
      width: 100%;
      text-align: center;
    }
    .checkbox-item .checkbox-label {
      background-color: #aed581;
      padding: 5px 10px;
      border-radius: 50px;
      width: 100%;
      text-align: center;
    }
    .checkbox-item input[type="checkbox"] { transform: scale(1.2); }
    .save-button {
      display: block;
      margin: 40px auto 0 auto;
      padding: 15px 30px;
      font-size: 18px;
      background-color: #f57c00;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      transition: background-color 0.3s;
    }
    .save-button:hover { background-color: #e65100; }
    .item span { width: 20px; display: inline-block; }
    /* ======================= */
    /* أنماط صفحة التقرير النهائي (تأثيرها مقتصر على قسم finalReportContent) */
    <style>
	/* أنماط تقرير النهائي */
.report-header {
  text-align: center;
  margin-bottom: 20px;
  padding: 10px;
  background: linear-gradient(to right, #4B8CF5, #6a0dad);
  color: white;
  border-radius: 10px;
}
.report-header h1 {
  margin: 0;
  font-size: 28px;
  font-weight: bold;
}
.report {
  padding: 20px;
  border: 1px solid #ccc;
  border-radius: 10px;
  background: #fff;
  font-size: 16px;
  line-height: 1.6;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  margin-top: 20px;
}

    #finalReportContent h1,
    #finalReportContent h2,
    #finalReportContent h3 {
      margin: 10px 0;
      text-align: center;
    }
    /* زر التقرير في القسم */
    #finalReportContent .top-button {
      margin: 10px auto;
      text-align: center;
    }
    #finalReportContent button {
      background-color: #4B8CF5;
      color: #fff;
      padding: 10px 25px;
      font-size: 16px;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    #finalReportContent button:hover {
      background-color: #3b78d8;
    }
    /* الحاوية الرئيسية للتقرير النهائي */
    #finalReportContent .container {
      width: 100%;
      max-width: 1200px;
      margin: 20px auto;
      display: flex;
      flex-direction: row;
      gap: 20px;
    }
    /* الشريط الجانبي */
    #finalReportContent .sidebar {
      flex: 0 0 300px;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    #finalReportContent .info-box {
      background-color: #fff;
      border-radius: 20px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      padding: 20px;
      text-align: center;
    }
    #finalReportContent .info-box label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
    }
    #finalReportContent .info-box input {
      width: 100%;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #ccc;
      outline: none;
    }
    /* صندوق كلمة المرور */
    #finalReportContent .password-box {
      background-color: #f8d7da;
      color: #721c24;
      text-align: center;
      line-height: 1.5;
    }
    /* القسم الرئيسي للتقرير النهائي */
    #finalReportContent .main-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    #finalReportContent .section-container {
      background-color: #fff;
      border-radius: 20px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      padding: 20px;
    }
    #finalReportContent .section-container h3 {
      margin-bottom: 10px;
    }
    #finalReportContent .choices {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    #finalReportContent .choice {
      display: flex;
      align-items: center;
      background-color: #e0f7fa;
      border-radius: 30px;
      padding: 5px 15px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    #finalReportContent .choice input {
      margin-right: 8px;
      transform: scale(1.2);
      cursor: pointer;
    }
    #finalReportContent .choice:hover {
      background-color: #b2ebf2;
    }
    #finalReportContent .choice.selected {
      background-color: #81d4fa !important;
    }
    /* التقرير النهائي */
    #finalReportContent .report {
      background-color: #fff;
      border-radius: 20px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      padding: 20px;
      display: none;
      white-space: pre-wrap;
      line-height: 1.6;
    }
    #finalReportContent .report.visible {
      display: block;
    }
    /* زر تحميل PDF */
    #finalReportContent .save-button {
      text-align: center;
      margin-top: 20px;
    }
    @media (max-width: 768px) {
      #finalReportContent .container {
        flex-direction: column;
      }
    }
  </style>
  
  <!-- ======================= -->
</head>

<body>
  <!-- ترويسة الصفحة -->
  <div class="header">
    <h1>Hosting Evony Farms</h1>
    <button onclick="toggleContent('rally')">Rally</button>
    <button class="event-button" onclick="toggleContent('eventMonsters')">Event Monsters</button>
    <button onclick="toggleContent('farming')">Farming</button>
    <button onclick="toggleContent('resourceTransport')">Resource Transport</button>
    <button class="event-button" onclick="toggleContent('troopTraining')">Troop Training</button>
    <button class="event-button" onclick="toggleContent('blackMarket')">Black Market</button>
    <button onclick="toggleContent('finalReport')">Report</button>
  </div>
  
  <!-- قسم Rally -->
  <div id="content" style="display: none;">
    <div class="groups-wrapper">
      <!-- مجموعة الجنرالات الرئيسيين -->
      <div class="group-container">
        <div class="list-container">
          <h3>Main Generals</h3>
          <input type="text" id="mainGeneralSearch" class="search-box" placeholder="Search Main Generals..." onkeyup="filterGenerals('main')">
          <div id="mainGeneralList"></div>
        </div>
        <div class="list-container">
          <h3>Selected Main Generals</h3>
          <div id="selectedMainGenerals"></div>
        </div>
      </div>
      <!-- مجموعة الجنرالات المساعدين -->
      <div class="group-container">
        <div class="list-container">
          <h3>Assistant Generals</h3>
          <input type="text" id="assistantGeneralSearch" class="search-box" placeholder="Search Assistant Generals..." onkeyup="filterGenerals('assistant')">
          <div id="assistantGeneralList"></div>
        </div>
        <div class="list-container">
          <h3>Selected Assistant Generals</h3>
          <div id="selectedAssistantGenerals"></div>
        </div>
      </div>
      <!-- مجموعة الوحوش -->
      <div class="group-container">
        <div class="list-container">
          <h3>Main Monster List</h3>
          <input type="text" id="monsterSearch" class="search-box" placeholder="Search Monsters..." onkeyup="filterMonsters()">
          <div id="monsterList"></div>
        </div>
        <div class="list-container">
          <h3>Excluded Monsters</h3>
          <div id="excludedMonsterList"></div>
        </div>
      </div>
    </div>
    <div id="eventButtonsContainer" class="event-buttons-container hidden">
      <div id="eventPages"></div>
    </div>

  </div>
  
  <!-- قسم Farming -->
  <div id="farmingContent" style="display: none;" class="farming-message">
    <h2>Farming Service</h2>
    <div class="food-wood-container">
      <div class="food-container">
        <h3>Send to food tile</h3>
        <div class="level-input-container">
          <label for="startFoodLevel">Start Level:</label>
          <input type="number" id="startFoodLevel" placeholder="1" min="1" max="16" required>
        </div>
        <div class="level-input-container">
          <label for="endFoodLevel">End Level:</label>
          <input type="number" id="endFoodLevel" placeholder="16" min="1" max="16" required>
        </div>
        <div class="default-march-container">
          <input type="checkbox" id="useDefaultMarchFood" name="useDefaultMarchFood">
          <label for="useDefaultMarchFood">Use default march</label>
        </div>
      </div>
      <div class="wood-container">
        <h3>Send to wood tile</h3>
        <div class="level-input-container">
          <label for="startWoodLevel">Start Level:</label>
          <input type="number" id="startWoodLevel" placeholder="1" min="1" max="16" required>
        </div>
        <div class="level-input-container">
          <label for="endWoodLevel">End Level:</label>
          <input type="number" id="endWoodLevel" placeholder="16" min="1" max="16" required>
        </div>
        <div class="default-march-container">
          <input type="checkbox" id="useDefaultMarchWood" name="useDefaultMarchWood">
          <label for="useDefaultMarchWood">Use default march</label>
        </div>
      </div>
    </div>
    <div class="food-wood-container">
      <div class="iron-container">
        <h3>Send to iron tile</h3>
        <div class="level-input-container">
          <label for="startIronLevel">Start Level:</label>
          <input type="number" id="startIronLevel" placeholder="1" min="1" max="16" required>
        </div>
        <div class="level-input-container">
          <label for="endIronLevel">End Level:</label>
          <input type="number" id="endIronLevel" placeholder="16" min="1" max="16" required>
        </div>
        <div class="default-march-container">
          <input type="checkbox" id="useDefaultMarchIron" name="useDefaultMarchIron">
          <label for="useDefaultMarchIron">Use default march</label>
        </div>
      </div>
      <div class="stone-container">
        <h3>Send to stone tile</h3>
        <div class="level-input-container">
          <label for="startStoneLevel">Start Level:</label>
          <input type="number" id="startStoneLevel" placeholder="1" min="1" max="16" required>
        </div>
        <div class="level-input-container">
          <label for="endStoneLevel">End Level:</label>
          <input type="number" id="endStoneLevel" placeholder="16" min="1" max="16" required>
        </div>
        <div class="default-march-container">
          <input type="checkbox" id="useDefaultMarchStone" name="useDefaultMarchStone">
          <label for="useDefaultMarchStone">Use default march</label>
        </div>
      </div>
    </div>
    <p>Note: This service is available for up to 10 players on the server, with an additional fee of $2.99.</p>

  </div>
  
  <!-- قسم Resource Transport -->
  <div id="resourceTransportContent" style="display: none;" class="farming-message">
    <h2>Resource Transport</h2>
    <p>Please add the coordinates of the account you want to send resources to.</p>
    <div class="server-number-container">
      <label>Server Number:</label>
      <div class="server-number-input-container">
        <label for="serverNumber">Server Number:</label>
        <input type="number" id="serverNumber" placeholder="Server Number" min="1" max="1940" required oninput="validateServerNumber(this)">
        <div class="error-message" id="serverErrorMessage">Not Available</div>
      </div>
    </div>
    <div class="resource-type-container">
      <label>Resource Type:</label>
      <div class="resource-type-input-container">
        <label for="grainSlider">Grain:</label>
        <input type="range" id="grainSlider" class="resource-slider" min="0" max="100" value="0" oninput="updateResourceValue(this, 'grainValue')">
        <div class="resource-value" id="grainValue">0</div>
      </div>
      <div class="resource-type-input-container">
        <label for="woodSlider">Wood:</label>
        <input type="range" id="woodSlider" class="resource-slider" min="0" max="100" value="0" oninput="updateResourceValue(this, 'woodValue')">
        <div class="resource-value" id="woodValue">0</div>
      </div>
      <div class="resource-type-input-container">
        <label for="ironSlider">Iron:</label>
        <input type="range" id="ironSlider" class="resource-slider" min="0" max="100" value="0" oninput="updateResourceValue(this, 'ironValue')">
        <div class="resource-value" id="ironValue">0</div>
      </div>
      <div class="resource-type-input-container">
        <label for="stoneSlider">Stone:</label>
        <input type="range" id="stoneSlider" class="resource-slider" min="0" max="100" value="0" oninput="updateResourceValue(this, 'stoneValue')">
        <div class="resource-value" id="stoneValue">0</div>
      </div>
    </div>
    <div class="coordinates-container">
      <label>Coordinates:</label>
      <div class="coordinates-input-container">
        <label for="xCoordinate">X:</label>
        <input type="text" id="xCoordinate" placeholder="X" required oninput="validateCoordinate(this)">
      </div>
      <div class="coordinates-input-container">
        <label for="yCoordinate">Y:</label>
        <input type="text" id="yCoordinate" placeholder="Y" required oninput="validateCoordinate(this)">
      </div>
    </div>

  </div>
  
  <!-- قسم Event Monsters -->
  <div id="eventMonstersContent" style="display: none;">
    <div class="message" id="eventMonstersMessage" style="display: none;">Please choose the levels of event monsters you want to exclude.</div>
    <div id="eventMonstersListsContainer" class="event-monsters-lists-container">
      <!-- Event Monsters Lists will be dynamically generated here -->
    </div>
    <div id="excludedEventMonstersListsContainer" class="excluded-event-monsters-lists-container">
      <!-- Excluded Event Monsters Lists will be dynamically generated here -->
    </div>

  </div>
  
  <!-- قسم Troop Training -->
  <div id="troopTrainingContent" style="display: none;" class="troop-training-content">
    <h2>Troop Training</h2>
    <span id="totalTroopsLabel">Total Troops: 0</span>
    <div class="troop-type-container">
      <div class="troop-type">
        <h3>Range</h3>
        <label for="rangeLevel">Troop Level: <span id="rangeLevelLabel">1</span></label>
        <input type="range" id="rangeLevel" min="1" max="15" value="1" oninput="document.getElementById('rangeLevelLabel').textContent = this.value">
        <label for="rangeNumber">Number of Troops:</label>
        <input type="number" id="rangeNumber" max="99999" placeholder="0" oninput="updateTotalTroops()">
      </div>
      <div class="troop-type">
        <h3>Mounted</h3>
        <label for="mountedLevel">Troop Level: <span id="mountedLevelLabel">1</span></label>
        <input type="range" id="mountedLevel" min="1" max="15" value="1" oninput="document.getElementById('mountedLevelLabel').textContent = this.value">
        <label for="mountedNumber">Number of Troops:</label>
        <input type="number" id="mountedNumber" max="99999" placeholder="0" oninput="updateTotalTroops()">
      </div>
      <div class="troop-type">
        <h3>Grand</h3>
        <label for="grandLevel">Troop Level: <span id="grandLevelLabel">1</span></label>
        <input type="range" id="grandLevel" min="1" max="15" value="1" oninput="document.getElementById('grandLevelLabel').textContent = this.value">
        <label for="grandNumber">Number of Troops:</label>
        <input type="number" id="grandNumber" max="99999" placeholder="0" oninput="updateTotalTroops()">
      </div>
      <div class="troop-type">
        <h3>Siege</h3>
        <label for="siegeLevel">Troop Level: <span id="siegeLevelLabel">1</span></label>
        <input type="range" id="siegeLevel" min="1" max="15" value="1" oninput="document.getElementById('siegeLevelLabel').textContent = this.value">
        <label for="siegeNumber">Number of Troops:</label>
        <input type="number" id="siegeNumber" max="99999" placeholder="0" oninput="updateTotalTroops()">
      </div>
    </div>

  </div>
  
  <!-- قسم Black Market & Commodities -->
  <div id="blackMarket" style="display: none;">
    <h2>Please select the resources you wish to purchase from the black market</h2>
    <div class="product-container">
      <!-- المنتج 1 -->
      <div class="box" data-box-type="product" data-index="1">
        <div class="item input-item">
          <input type="text" id="text1_1" placeholder="general exp" value="general exp" oninput="updateText2(1, 'text1_')">
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="check2_1" checked>
          <label id="label2_1" class="checkbox-label">general exp</label>
        </div>
        <div class="item text-only">
          <span></span>
          <label class="text-label">purchase type</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="check4_1" checked>
          <label class="checkbox-label">resource</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="check5_1" checked>
          <label class="checkbox-label">gold</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="check6_1" checked>
          <label class="checkbox-label">gems</label>
        </div>
      </div>
      <!-- المنتج 2 -->
      <div class="box" data-box-type="product" data-index="2">
        <div class="item input-item">
          <input type="text" id="text1_2" placeholder="five million wood" value="five million wood" oninput="updateText2(2, 'text1_')">
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="check2_2" checked>
          <label id="label2_2" class="checkbox-label">five million wood</label>
        </div>
        <div class="item text-only">
          <span></span>
          <label class="text-label">purchase type</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="check4_2" checked>
          <label class="checkbox-label">resource</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="check5_2" checked>
          <label class="checkbox-label">gold</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="check6_2" checked>
          <label class="checkbox-label">gems</label>
        </div>
      </div>
      <!-- المنتج 3 -->
      <div class="box" data-box-type="product" data-index="3">
        <div class="item input-item">
          <input type="text" id="text1_3" placeholder="five million iron" value="five million iron" oninput="updateText2(3, 'text1_')">
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="check2_3" checked>
          <label id="label2_3" class="checkbox-label">five million iron</label>
        </div>
        <div class="item text-only">
          <span></span>
          <label class="text-label">purchase type</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="check4_3" checked>
          <label class="checkbox-label">resource</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="check5_3" checked>
          <label class="checkbox-label">gold</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="check6_3" checked>
          <label class="checkbox-label">gems</label>
        </div>
      </div>
      <!-- المنتج 4 -->
      <div class="box" data-box-type="product" data-index="4">
        <div class="item input-item">
          <input type="text" id="text1_4" placeholder="five million food" value="five million food" oninput="updateText2(4, 'text1_')">
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="check2_4" checked>
          <label id="label2_4" class="checkbox-label">five million food</label>
        </div>
        <div class="item text-only">
          <span></span>
          <label class="text-label">purchase type</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="check4_4" checked>
          <label class="checkbox-label">resource</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="check5_4" checked>
          <label class="checkbox-label">gold</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="check6_4" checked>
          <label class="checkbox-label">gems</label>
        </div>
      </div>
      <!-- المنتج 5 -->
      <div class="box" data-box-type="product" data-index="5">
        <div class="item input-item">
          <input type="text" id="text1_5" placeholder="five million stone" value="five million stone" oninput="updateText2(5, 'text1_')">
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="check2_5" checked>
          <label id="label2_5" class="checkbox-label">five million stone</label>
        </div>
        <div class="item text-only">
          <span></span>
          <label class="text-label">purchase type</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="check4_5" checked>
          <label class="checkbox-label">resource</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="check5_5" checked>
          <label class="checkbox-label">gold</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="check6_5" checked>
          <label class="checkbox-label">gems</label>
        </div>
      </div>
      <!-- المنتج 6 -->
      <div class="box" data-box-type="product" data-index="6">
        <div class="item input-item">
          <input type="text" id="text1_6" placeholder="one million food" value="one million food" oninput="updateText2(6, 'text1_')">
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="check2_6" checked>
          <label id="label2_6" class="checkbox-label">one million food</label>
        </div>
        <div class="item text-only">
          <span></span>
          <label class="text-label">purchase type</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="check4_6" checked>
          <label class="checkbox-label">resource</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="check5_6" checked>
          <label class="checkbox-label">gold</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="check6_6" checked>
          <label class="checkbox-label">gems</label>
        </div>
      </div>
    </div>
    
    <h3>Additional Commodities</h3>
    <div class="commodity-container">
      <!-- السلعة 1: one million wood -->
      <div class="box" data-box-type="commodity" data-index="1">
        <div class="item input-item">
          <input type="text" id="ctext1_1" placeholder="one million wood" value="one million wood" oninput="updateText2(1, 'ctext1_')">
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck2_1" checked>
          <label id="clabel2_1" class="checkbox-label">one million wood</label>
        </div>
        <div class="item text-only">
          <span></span>
          <label class="text-label">purchase type</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck4_1" checked>
          <label class="checkbox-label">resource</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck5_1" checked>
          <label class="checkbox-label">gold</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck6_1" checked>
          <label class="checkbox-label">gems</label>
        </div>
      </div>
      <!-- السلعة 2: one million stone -->
      <div class="box" data-box-type="commodity" data-index="2">
        <div class="item input-item">
          <input type="text" id="ctext1_2" placeholder="one million stone" value="one million stone" oninput="updateText2(2, 'ctext1_')">
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck2_2" checked>
          <label id="clabel2_2" class="checkbox-label">one million stone</label>
        </div>
        <div class="item text-only">
          <span></span>
          <label class="text-label">purchase type</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck4_2" checked>
          <label class="checkbox-label">resource</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck5_2" checked>
          <label class="checkbox-label">gold</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck6_2" checked>
          <label class="checkbox-label">gems</label>
        </div>
      </div>
      <!-- السلعة 3: one million iron -->
      <div class="box" data-box-type="commodity" data-index="3">
        <div class="item input-item">
          <input type="text" id="ctext1_3" placeholder="one million iron" value="one million iron" oninput="updateText2(3, 'ctext1_')">
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck2_3" checked>
          <label id="clabel2_3" class="checkbox-label">one million iron</label>
        </div>
        <div class="item text-only">
          <span></span>
          <label class="text-label">purchase type</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck4_3" checked>
          <label class="checkbox-label">resource</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck5_3" checked>
          <label class="checkbox-label">gold</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck6_3" checked>
          <label class="checkbox-label">gems</label>
        </div>
      </div>
      <!-- السلعة 4: two million food -->
      <div class="box" data-box-type="commodity" data-index="4">
        <div class="item input-item">
          <input type="text" id="ctext1_4" placeholder="two million food" value="two million food" oninput="updateText2(4, 'ctext1_')">
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck2_4" checked>
          <label id="clabel2_4" class="checkbox-label">two million food</label>
        </div>
        <div class="item text-only">
          <span></span>
          <label class="text-label">purchase type</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck4_4" checked>
          <label class="checkbox-label">resource</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck5_4" checked>
          <label class="checkbox-label">gold</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck6_4" checked>
          <label class="checkbox-label">gems</label>
        </div>
      </div>
      <!-- السلعة 5: two million iron -->
      <div class="box" data-box-type="commodity" data-index="5">
        <div class="item input-item">
          <input type="text" id="ctext1_5" placeholder="two million iron" value="two million iron" oninput="updateText2(5, 'ctext1_')">
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck2_5" checked>
          <label id="clabel2_5" class="checkbox-label">two million iron</label>
        </div>
        <div class="item text-only">
          <span></span>
          <label class="text-label">purchase type</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck4_5" checked>
          <label class="checkbox-label">resource</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck5_5" checked>
          <label class="checkbox-label">gold</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck6_5" checked>
          <label class="checkbox-label">gems</label>
        </div>
      </div>
      <!-- السلعة 6: two million stone -->
      <div class="box" data-box-type="commodity" data-index="6">
        <div class="item input-item">
          <input type="text" id="ctext1_6" placeholder="two million stone" value="two million stone" oninput="updateText2(6, 'ctext1_')">
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck2_6" checked>
          <label id="clabel2_6" class="checkbox-label">two million stone</label>
        </div>
        <div class="item text-only">
          <span></span>
          <label class="text-label">purchase type</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck4_6" checked>
          <label class="checkbox-label">resource</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck5_6" checked>
          <label class="checkbox-label">gold</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck6_6" checked>
          <label class="checkbox-label">gems</label>
        </div>
      </div>
      <!-- السلعة 7: two million wood -->
      <div class="box" data-box-type="commodity" data-index="7">
        <div class="item input-item">
          <input type="text" id="ctext1_7" placeholder="two million wood" value="two million wood" oninput="updateText2(7, 'ctext1_')">
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck2_7" checked>
          <label id="clabel2_7" class="checkbox-label">two million wood</label>
        </div>
        <div class="item text-only">
          <span></span>
          <label class="text-label">purchase type</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck4_7" checked>
          <label class="checkbox-label">resource</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck5_7" checked>
          <label class="checkbox-label">gold</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck6_7" checked>
          <label class="checkbox-label">gems</label>
        </div>
      </div>
      <!-- السلعة 8: iron speed up -->
      <div class="box" data-box-type="commodity" data-index="8">
        <div class="item input-item">
          <input type="text" id="ctext1_8" placeholder="iron speed up" value="iron speed up" oninput="updateText2(8, 'ctext1_')">
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck2_8" checked>
          <label id="clabel2_8" class="checkbox-label">iron speed up</label>
        </div>
        <div class="item text-only">
          <span></span>
          <label class="text-label">purchase type</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck4_8" checked>
          <label class="checkbox-label">resource</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck5_8" checked>
          <label class="checkbox-label">gold</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck6_8" checked>
          <label class="checkbox-label">gems</label>
        </div>
      </div>
      <!-- السلعة 9: stone speed up -->
      <div class="box" data-box-type="commodity" data-index="9">
        <div class="item input-item">
          <input type="text" id="ctext1_9" placeholder="stone speed up" value="stone speed up" oninput="updateText2(9, 'ctext1_')">
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck2_9" checked>
          <label id="clabel2_9" class="checkbox-label">stone speed up</label>
        </div>
        <div class="item text-only">
          <span></span>
          <label class="text-label">purchase type</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck4_9" checked>
          <label class="checkbox-label">resource</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck5_9" checked>
          <label class="checkbox-label">gold</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck6_9" checked>
          <label class="checkbox-label">gems</label>
        </div>
      </div>
      <!-- السلعة 10: food speed up -->
      <div class="box" data-box-type="commodity" data-index="10">
        <div class="item input-item">
          <input type="text" id="ctext1_10" placeholder="food speed up" value="food speed up" oninput="updateText2(10, 'ctext1_')">
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck2_10" checked>
          <label id="clabel2_10" class="checkbox-label">food speed up</label>
        </div>
        <div class="item text-only">
          <span></span>
          <label class="text-label">purchase type</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck4_10" checked>
          <label class="checkbox-label">resource</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck5_10" checked>
          <label class="checkbox-label">gold</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck6_10" checked>
          <label class="checkbox-label">gems</label>
        </div>
      </div>
      <!-- السلعة 11: wood speed up -->
      <div class="box" data-box-type="commodity" data-index="11">
        <div class="item input-item">
          <input type="text" id="ctext1_11" placeholder="wood speed up" value="wood speed up" oninput="updateText2(11, 'ctext1_')">
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck2_11" checked>
          <label id="clabel2_11" class="checkbox-label">wood speed up</label>
        </div>
        <div class="item text-only">
          <span></span>
          <label class="text-label">purchase type</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck4_11" checked>
          <label class="checkbox-label">resource</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck5_11" checked>
          <label class="checkbox-label">gold</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck6_11" checked>
          <label class="checkbox-label">gems</label>
        </div>
      </div>
      <!-- السلعة 12: wheel chips -->
      <div class="box" data-box-type="commodity" data-index="12">
        <div class="item input-item">
          <input type="text" id="ctext1_12" placeholder="wheel chips" value="wheel chips" oninput="updateText2(12, 'ctext1_')">
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck2_12" checked>
          <label id="clabel2_12" class="checkbox-label">wheel chips</label>
        </div>
        <div class="item text-only">
          <span></span>
          <label class="text-label">purchase type</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck4_12" checked>
          <label class="checkbox-label">resource</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck5_12" checked>
          <label class="checkbox-label">gold</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck6_12" checked>
          <label class="checkbox-label">gems</label>
        </div>
      </div>
      <!-- السلعة 13: VIP time -->
      <div class="box" data-box-type="commodity" data-index="13">
        <div class="item input-item">
          <input type="text" id="ctext1_13" placeholder="VIP time" value="VIP time" oninput="updateText2(13, 'ctext1_')">
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck2_13" checked>
          <label id="clabel2_13" class="checkbox-label">VIP time</label>
        </div>
        <div class="item text-only">
          <span></span>
          <label class="text-label">purchase type</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck4_13" checked>
          <label class="checkbox-label">resource</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck5_13" checked>
          <label class="checkbox-label">gold</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck6_13" checked>
          <label class="checkbox-label">gems</label>
        </div>
      </div>
      <!-- السلعة 14: stamina -->
      <div class="box" data-box-type="commodity" data-index="14">
        <div class="item input-item">
          <input type="text" id="ctext1_14" placeholder="stamina" value="stamina" oninput="updateText2(14, 'ctext1_')">
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck2_14" checked>
          <label id="clabel2_14" class="checkbox-label">stamina</label>
        </div>
        <div class="item text-only">
          <span></span>
          <label class="text-label">purchase type</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck4_14" checked>
          <label class="checkbox-label">resource</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck5_14" checked>
          <label class="checkbox-label">gold</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck6_14" checked>
          <label class="checkbox-label">gems</label>
        </div>
      </div>
      <!-- السلعة 15: treasure box -->
      <div class="box" data-box-type="commodity" data-index="15">
        <div class="item input-item">
          <input type="text" id="ctext1_15" placeholder="treasure box" value="treasure box" oninput="updateText2(15, 'ctext1_')">
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck2_15" checked>
          <label id="clabel2_15" class="checkbox-label">treasure box</label>
        </div>
        <div class="item text-only">
          <span></span>
          <label class="text-label">purchase type</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck4_15" checked>
          <label class="checkbox-label">resource</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck5_15" checked>
          <label class="checkbox-label">gold</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck6_15" checked>
          <label class="checkbox-label">gems</label>
        </div>
      </div>
      <!-- السلعة 16: tributes -->
      <div class="box" data-box-type="commodity" data-index="16">
        <div class="item input-item">
          <input type="text" id="ctext1_16" placeholder="tributes" value="tributes" oninput="updateText2(16, 'ctext1_')">
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck2_16" checked>
          <label id="clabel2_16" class="checkbox-label">tributes</label>
        </div>
        <div class="item text-only">
          <span></span>
          <label class="text-label">purchase type</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck4_16" checked>
          <label class="checkbox-label">resource</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck5_16" checked>
          <label class="checkbox-label">gold</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck6_16" checked>
          <label class="checkbox-label">gems</label>
        </div>
      </div>
      <!-- السلعة 17: monarch exp -->
      <div class="box" data-box-type="commodity" data-index="17">
        <div class="item input-item">
          <input type="text" id="ctext1_17" placeholder="monarch exp" value="monarch exp" oninput="updateText2(17, 'ctext1_')">
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck2_17" checked>
          <label id="clabel2_17" class="checkbox-label">monarch exp</label>
        </div>
        <div class="item text-only">
          <span></span>
          <label class="text-label">purchase type</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck4_17" checked>
          <label class="checkbox-label">resource</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck5_17" checked>
          <label class="checkbox-label">gold</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck6_17" checked>
          <label class="checkbox-label">gems</label>
        </div>
      </div>
      <!-- السلعة 18: tactic scroll -->
      <div class="box" data-box-type="commodity" data-index="18">
        <div class="item input-item">
          <input type="text" id="ctext1_18" placeholder="tactic scroll" value="tactic scroll" oninput="updateText2(18, 'ctext1_')">
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck2_18" checked>
          <label id="clabel2_18" class="checkbox-label">tactic scroll</label>
        </div>
        <div class="item text-only">
          <span></span>
          <label class="text-label">purchase type</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck4_18" checked>
          <label class="checkbox-label">resource</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck5_18" checked>
          <label class="checkbox-label">gold</label>
        </div>
        <div class="item checkbox-item">
          <input type="checkbox" id="ccheck6_18" checked>
          <label class="checkbox-label">gems</label>
        </div>
      </div>
    </div>

  </div>
  
  <!-- زر حفظ في أسفل الصفحة -->
  <button class="save-button" onclick="saveSelections()">Save Selections</button>
  
  <!-- ======================= -->
<!-- قسم التقرير النهائي (Final Report Section) -->
<div id="finalReportContent" style="display: none;">
  <div class="top-button">
    <button onclick="generateReport()">Report</button>
  </div>
  <div class="container">
    <!-- الشريط الجانبي -->
    <div class="sidebar">
      <div class="info-box" style="border: 2px solid #4B8CF5;">
        <label for="playerName">Player Name</label>
        <input type="text" id="playerName" placeholder="Enter your name here" />
      </div>
      <div class="info-box" style="border: 2px solid #8BC34A;">
        <label for="account">Linked Account (Facebook or Gmail)</label>
        <input type="text" id="account" placeholder="Enter your linked account here" />
      </div>
      <div class="info-box password-box" style="border: 2px solid #f5c6cb;">
        <p>Please send the password to the person who will receive the final report.+436811083455
whatsapp (This field is read-only.)</p>
      </div>
    </div>
    <!-- المحتوى الرئيسي للتقرير النهائي -->
    <div class="main-content">
      <!-- عنوان الموقع (Header) -->
      <div class="report-header">
        <h1>Hosting Evony Farms
</h1>
        <hr />
      </div>
      <!-- منطقة التقرير النهائي حيث يتم عرض النص الناتج -->
      <div class="report" id="reportSection">
        <!-- سيتم ملء التقرير هنا عند الضغط على زر Report -->
      </div>
      <!-- زر حفظ وتنزيل التقرير بصيغة PDF -->
      <div class="save-button">
        <button onclick="downloadPDF()">Save & Download Report</button>
      </div>
    </div>
  </div>
</div>



  
  <!-- ======================= -->
  <!-- سكريبتات الوظائف (الكود الأصلي) -->
  <script>
    /**
     * تقوم الدالة updateText2 بتحديث النص في العنصر الثاني بناءً على قيمة حقل الإدخال.
     * @param {number} index - رقم المربع.
     * @param {string} prefix - بادئة id (مثلاً "text1_" للمنتجات أو "ctext1_" للسلع).
     */
    function updateText2(index, prefix) {
      let inputId = prefix + index;
      // إذا كانت البادئة "text1_" فإن label id يبدأ بـ "label2_" وإلا "clabel2_"
      let labelId = (prefix === 'text1_' ? 'label2_' : 'clabel2_') + index;
      var input = document.getElementById(inputId);
      var label = document.getElementById(labelId);
      if (input && label) {
        label.innerText = input.value || input.placeholder;
      }
    }
  
    /**
     * دالة saveSelections تقوم بجمع البيانات من جميع المربعات (المنتجات والسلع)
     * وتعرض النتائج في وحدة التحكم (يمكن تعديلها للحفظ في مكان آخر).
     */
    function saveSelections() {
      // مصفوفة لتخزين بيانات جميع المربعات
      const allData = [];
  
      // اختيار جميع المربعات (سواء المنتجات أو السلع)
      const boxes = document.querySelectorAll('.box');
      
      boxes.forEach(box => {
        // تحديد نوع المربع (منتج أو سلعة) من البيانات المخزنة في العنصر
        const boxType = box.getAttribute('data-box-type') || 'unknown';
        const index = box.getAttribute('data-index') || '';
        
        // استخراج قيمة الحقل (الاسم المتغير)
        const input = box.querySelector('.input-item input[type="text"]');
        const nameValue = input ? input.value : '';
  
        // استخراج البيانات من خانة الاختيار والـ label الخاص بها في العنصر الثاني
        const checkboxItems = box.querySelectorAll('.checkbox-item');
        const checkboxData = [];
        checkboxItems.forEach(item => {
          const checkbox = item.querySelector('input[type="checkbox"]');
          const label = item.querySelector('.checkbox-label');
          checkboxData.push({
            label: label ? label.innerText : '',
            checked: checkbox ? checkbox.checked : false
          });
        });
  
        // استخراج البيانات من العنصر النص الثابت (purchase type)
        const textOnlyItem = box.querySelector('.text-only .text-label');
        const purchaseType = textOnlyItem ? textOnlyItem.innerText : '';
  
        // تجميع البيانات للمربع الحالي
        allData.push({
          type: boxType,
          index: index,
          name: nameValue,
          purchaseType: purchaseType,
          checkboxes: checkboxData
        });
      });
  
      console.log('Saved Selections:', allData);
      alert('Your selections have been saved. Check the console for details.');
    }
  
    function saveRally() { alert("تم حفظ إعدادات Rally!"); }
    function saveFarming() { alert("تم حفظ إعدادات Farming!"); }
    function saveResourceTransport() { alert("تم حفظ إعدادات Resource Transport!"); }
    function saveEventMonsters() { alert("تم حفظ إعدادات Event Monsters!"); }
    function saveTroopTraining() { alert("تم حفظ إعدادات Troop Training!"); }
    function saveBlackMarket() { alert("Black Market Settings Saved!"); }
  
    // ======================= 
    // وظائف إضافية لأقسام الجنرالات والوحوش وغيرها
    // =======================
    const generals = [
      "Achilles","lautaro","maximillan l","mehmed li","melisande","merlin","menshikov","narcissus","narses","nathanael greene","oda nobunaga","oleg of novgorod","philip li","poligenus","princess kaguya","prince eugene","princess lucy","prince rhaegar","pyrrhus","queen boudica","queen jindeok","raged king","ragnar","ramesses li","robert guiscard","robert the bruce","roland","saladin","sanda yukimura","sappho","scipio africanus","seleucus l","sigurd","simeon the great","shajar al durr","sherman","shimazu yoshihiro","skanderbeg","soult","spartacus","subutai","suchet","suleiman the magnificent","sun ce","surena","sweyn forkbeard","tachibana ginchiyo","takeda shingen","theodora","theodosius l","thutmose lii","tomyris","totila","toyotomi hideyori","trajan","ulysses s grnt","undead general","vladimir the great","washington prime","yi sun sin","zachary taylor","miltiades","minamoto no yoshitsune","mordred","mu guiying","napolean","napolean prime","emperor napolean prime","marcus agrippa","marco polo","maria theresa","martinus","martinus skin","mason weaver","matthias l","Alexander","leo lii","li jing","li naomasa","li shimin","ludwig","lu xun","lysander","ly thuong kiet","Caesar","huo qubing","james bowie","james conrad","jayavarman li","john churchill","john l of portugal","khalid","laudon","douglas","gustavus adolphus","gwanggaeto the great","gwon ryul","hannibal","henry v","hernando cortes","honda tadakatsu","hestia","edward teach","elektra","elektra skin","elise","empress wu","epaminondas","eulji mundeok","frigg","gaius marius","george a custer","george dewey","george monck","gnarr","godrey of bouillon","guan yu","gunther","Cleopatra", "Hannibal", "Napoleon", "Sun Tzu", "aethellaed","alessandra","barbarossa","basil li","beowulf","bertrand du guesclin","caesar","carus","casimir pulaski","cheng yaojin","constance l","dmitry","alexander nevsky","alexander the great","alfred the great","algernon sidney","amir timur","askia muhammad","aurelian","baibars","Genghis Khan"
    ];
    const monsters = [ 
      "ZombieBoss", "RedCap", "Centaur", "Skeleton", "Werewolf", "Manticore", "Yasha", "Peryton", "Minotaur","Draugr","Surtr","French Coalition","Sphinx Castle","Fortress Pyramid","Aglaope","Basilisk","Epic Hydra","Legendary Hydra","Senior Hydra","Medium Hydra","Junior Hydra","Boss Garuda Weak","Boss Fenrir Weak","Boss 21 Azazel","Boss 20 Kraken","Boss 19 Stymphalian Bird","Boss 18 Ammit","Boss 17 Typhon","Boss 16 Jormungandr","Boss 15 Phoenix","Boss 14 Behemoth","Boss 13 Fafnir","Boss 12 Kamaitachi","Boss 11 Ifit","Griffin"
    ]; 
    const eventMonsters = [
      { name: "Ymir", levels: 5 },
      { name: "Viking", levels: 40 },
      { name: "Event Bosses", levels: 5 },
      { name: "Cerberus", levels: 3 },
      { name: "Nian", levels: 5 },
      { name: "Sphinx", levels: 6 },
      { name: "Pumpkin", levels: 7 },
      { name: "Long Legs", levels: 5 },
      { name: "Skullcrawler", levels: 5 },
      { name: "Pan", levels: 5 },
      { name: "King Ghidorah", levels: 4 },
      { name: "Shadow of King", levels: 2 },
      { name: "Acheloids", levels: 2 },
      { name: "Bayard", levels: 3 },
      { name: "Tiger Gladiator", levels: 2, special: ["Level 1", "Avoid Level 2 Only"] }
    ];
  
    function filterGenerals(type) {
      const searchInput = document.getElementById(`${type}GeneralSearch`);
      const filter = searchInput.value.toLowerCase();
      const listContainer = document.getElementById(`${type}GeneralList`);
      const items = listContainer.getElementsByClassName('item');
      Array.from(items).forEach(item => {
        const text = item.textContent || item.innerText;
        item.style.display = text.toLowerCase().indexOf(filter) > -1 ? "" : "none";
      });
    }
  
    function validateCoordinate(input) {
      if (input.value.length > 3) { input.value = input.value.slice(0, 3); }
      input.style.borderColor = input.validity.valid ? 'green' : 'red';
    }
  
    function validateServerNumber(input) {
      const errorMessage = document.getElementById("serverErrorMessage");
      if (input.value > 1940) {
        input.setCustomValidity("Not Available");
        errorMessage.style.display = "block";
      } else {
        input.setCustomValidity("");
        errorMessage.style.display = "none";
      }
      input.style.borderColor = input.validity.valid ? 'green' : 'red';
    }
  
    function updateResourceValue(slider, valueId) {
      document.getElementById(valueId).textContent = slider.value;
    }
  
    function populateLists() {
      const mainGeneralList = document.getElementById("mainGeneralList");
      const assistantGeneralList = document.getElementById("assistantGeneralList");
      const monsterList = document.getElementById("monsterList");
      const selectedMainGenerals = document.getElementById("selectedMainGenerals");
      const selectedAssistantGenerals = document.getElementById("selectedAssistantGenerals");
      const excludedMonsterList = document.getElementById("excludedMonsterList");
      generals.forEach(general => {
        createGeneralItem(mainGeneralList, general, 'main');
        createGeneralItem(assistantGeneralList, general, 'assistant');
      });
      monsters.forEach(monster => {
        const item = document.createElement("div");
        item.className = "item";
        item.textContent = monster;
        item.onclick = () => {
          item.classList.toggle("excluded");
          updateExcludedList(item, excludedMonsterList);
        };
        monsterList.appendChild(item);
      });
    }
  
    function createGeneralItem(container, general, type) {
      const item = document.createElement("div");
      item.className = `item ${type}-general`;
      item.textContent = general;
      item.onclick = () => {
        item.classList.toggle("selected");
        updateSelectedList(item, type === 'main' ? document.getElementById("selectedMainGenerals") : document.getElementById("selectedAssistantGenerals"));
      };
      container.appendChild(item);
    }
  
    function updateSelectedList(item, list) {
      if (item.classList.contains("selected")) {
        const clone = item.cloneNode(true);
        clone.onclick = null;
        list.appendChild(clone);
      } else {
        Array.from(list.children).forEach(child => {
          if (child.textContent === item.textContent) { list.removeChild(child); }
        });
      }
    }
  
    function updateExcludedList(item, list) {
      if (item.classList.contains("excluded")) {
        const clone = item.cloneNode(true);
        clone.onclick = null;
        list.appendChild(clone);
      } else {
        Array.from(list.children).forEach(child => {
          if (child.textContent === item.textContent) { list.removeChild(child); }
        });
      }
    }
  
    function filterMonsters() {
      const searchInput = document.getElementById("monsterSearch");
      const filter = searchInput.value.toLowerCase();
      const listContainer = document.getElementById("monsterList");
      const items = listContainer.getElementsByClassName('item');
      Array.from(items).forEach(item => {
        const text = item.textContent || item.innerText;
        item.style.display = text.toLowerCase().indexOf(filter) > -1 ? "" : "none";
      });
    }
  
    function populateEventMonsters() {
      const eventMonstersListsContainer = document.getElementById("eventMonstersListsContainer");
      const excludedEventMonstersListsContainer = document.getElementById("excludedEventMonstersListsContainer");
      eventMonstersListsContainer.innerHTML = '';
      excludedEventMonstersListsContainer.innerHTML = '';
      const rows = Math.ceil(eventMonsters.length / 4);
      for (let row = 0; row < rows; row++) {
        const eventRow = document.createElement("div");
        eventRow.className = "event-row";
        const excludedEventRow = document.createElement("div");
        excludedEventRow.className = "event-row";
        for (let col = 0; col < 4; col++) {
          const index = row * 4 + col;
          if (index < eventMonsters.length) {
            const event = eventMonsters[index];
            const eventMonsterCard = createEventMonsterCard(event, index);
            eventRow.appendChild(eventMonsterCard);
            const excludedEventMonsterCard = createExcludedEventMonsterCard(event, index);
            excludedEventRow.appendChild(excludedEventMonsterCard);
          }
        }
        eventMonstersListsContainer.appendChild(eventRow);
        excludedEventMonstersListsContainer.appendChild(excludedEventRow);
      }
    }
  
    function createEventMonsterCard(event, index) {
      const card = document.createElement("div");
      card.className = "event-monster-card";
      card.dataset.index = index;
      const header = document.createElement("h3");
      header.textContent = event.name;
      card.appendChild(header);
      const levelSelect = document.createElement("select");
      levelSelect.className = "level-select";
      if (event.special) {
        event.special.forEach(level => {
          const option = document.createElement("option");
          option.value = level;
          option.textContent = level;
          levelSelect.appendChild(option);
        });
      } else {
        for (let i = 1; i <= event.levels; i++) {
          const option = document.createElement("option");
          option.value = `Level ${i}`;
          option.textContent = `Level ${i}`;
          levelSelect.appendChild(option);
        }
      }
      levelSelect.onchange = () => {
        const selectedLevel = levelSelect.value;
        const excludedCard = document.querySelector(`.excluded-event-monster-card[data-index="${index}"]`);
        const excludedLevels = excludedCard.querySelector(".excluded-levels");
        const existingLevel = Array.from(excludedLevels.children).find(level => level.textContent === selectedLevel);
        if (!existingLevel) {
          const levelItem = document.createElement("div");
          levelItem.className = "item excluded excluded-level-item";
          levelItem.textContent = selectedLevel;
          levelItem.onclick = () => {
            levelItem.remove();
            levelSelect.value = '';
          };
          excludedLevels.appendChild(levelItem);
        }
      };
      card.appendChild(levelSelect);
      return card;
    }
  
    function createExcludedEventMonsterCard(event, index) {
      const card = document.createElement("div");
      card.className = "excluded-event-monster-card";
      card.dataset.index = index;
      const header = document.createElement("h3");
      header.textContent = `${event.name} - Excluded Levels`;
      card.appendChild(header);
      const excludedLevels = document.createElement("div");
      excludedLevels.className = "excluded-levels";
      card.appendChild(excludedLevels);
      return card;
    }
  
    function updateTotalTroops() {
      const range = parseInt(document.getElementById("rangeNumber").value) || 0;
      const mounted = parseInt(document.getElementById("mountedNumber").value) || 0;
      const grand = parseInt(document.getElementById("grandNumber").value) || 0;
      const siege = parseInt(document.getElementById("siegeNumber").value) || 0;
      const total = range + mounted + grand + siege;
      document.getElementById("totalTroopsLabel").textContent = "Total Troops: " + total;
    }
  
    document.addEventListener("DOMContentLoaded", () => {
      populateLists();
      populateEventMonsters();
    });
  </script>
  
  <!-- ======================= -->
  <!-- مكتبات لإنشاء PDF (من كود التقرير النهائي) -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  
  <!-- سكريبتات التقرير النهائي -->
  <script>
    // دالة generateReport تجمع معلومات من كافة الأقسام وتضيفها إلى التقرير النهائي
    function generateReport() {
      let reportText = "";
      
      // معلومات اللاعب والحساب
      const playerName = document.getElementById('playerName').value.trim();
      const account = document.getElementById('account').value.trim();
      reportText += playerName ? `Player Name: ${playerName}\n` : "Player Name: (not provided)\n";
      reportText += account ? `Linked Account: ${account}\n` : "Linked Account: (not provided)\n";
      reportText += "\n====================================\n";
      
      // قسم Rally
      reportText += "=== Rally ===\n";
      const selectedMainGenerals = Array.from(document.getElementById("selectedMainGenerals").children)
                                        .map(item => item.textContent);
      const selectedAssistantGenerals = Array.from(document.getElementById("selectedAssistantGenerals").children)
                                             .map(item => item.textContent);
      const excludedMonsters = Array.from(document.getElementById("excludedMonsterList").children)
                                    .map(item => item.textContent);
      if(selectedMainGenerals.length > 0) {
        reportText += `Main Generals: ${selectedMainGenerals.join(", ")}\n`;
      }
      if(selectedAssistantGenerals.length > 0) {
        reportText += `Assistant Generals: ${selectedAssistantGenerals.join(", ")}\n`;
      }
      if(excludedMonsters.length > 0) {
        reportText += `Excluded Monsters: ${excludedMonsters.join(", ")}\n`;
      }
      reportText += "\n====================================\n";
      
      // قسم Farming
      reportText += "=== Farming ===\n";
      const startFoodLevel = document.getElementById('startFoodLevel').value;
      const endFoodLevel = document.getElementById('endFoodLevel').value;
      const startWoodLevel = document.getElementById('startWoodLevel').value;
      const endWoodLevel = document.getElementById('endWoodLevel').value;
      const startIronLevel = document.getElementById('startIronLevel').value;
      const endIronLevel = document.getElementById('endIronLevel').value;
      const startStoneLevel = document.getElementById('startStoneLevel').value;
      const endStoneLevel = document.getElementById('endStoneLevel').value;
      reportText += `Food Tile Levels: ${startFoodLevel} to ${endFoodLevel}\n`;
      reportText += `Wood Tile Levels: ${startWoodLevel} to ${endWoodLevel}\n`;
      reportText += `Iron Tile Levels: ${startIronLevel} to ${endIronLevel}\n`;
      reportText += `Stone Tile Levels: ${startStoneLevel} to ${endStoneLevel}\n`;
      reportText += "\n====================================\n";
      
      // قسم Resource Transport
      reportText += "=== Resource Transport ===\n";
      const serverNumber = document.getElementById('serverNumber').value;
      const xCoordinate = document.getElementById('xCoordinate').value;
      const yCoordinate = document.getElementById('yCoordinate').value;
      const grainValue = document.getElementById('grainValue').textContent;
      const woodValue = document.getElementById('woodValue').textContent;
      const ironValue = document.getElementById('ironValue').textContent;
      const stoneValue = document.getElementById('stoneValue').textContent;
      reportText += `Server Number: ${serverNumber}\n`;
      reportText += `Coordinates: X = ${xCoordinate}, Y = ${yCoordinate}\n`;
      reportText += `Resources (%): Grain ${grainValue}%, Wood ${woodValue}%, Iron ${ironValue}%, Stone ${stoneValue}%\n`;
      reportText += "\n====================================\n";
      
      // قسم Troop Training
      reportText += "=== Troop Training ===\n";
      const rangeLevel = document.getElementById('rangeLevel').value;
      const rangeNumber = document.getElementById('rangeNumber').value;
      const mountedLevel = document.getElementById('mountedLevel').value;
      const mountedNumber = document.getElementById('mountedNumber').value;
      const grandLevel = document.getElementById('grandLevel').value;
      const grandNumber = document.getElementById('grandNumber').value;
      const siegeLevel = document.getElementById('siegeLevel').value;
      const siegeNumber = document.getElementById('siegeNumber').value;
      reportText += `Range: Level ${rangeLevel}, Number: ${rangeNumber}\n`;
      reportText += `Mounted: Level ${mountedLevel}, Number: ${mountedNumber}\n`;
      reportText += `Grand: Level ${grandLevel}, Number: ${grandNumber}\n`;
      reportText += `Siege: Level ${siegeLevel}, Number: ${siegeNumber}\n`;
      reportText += "\n====================================\n";
      
      // قسم Black Market & Commodities
      reportText += "=== Black Market & Commodities ===\n";
      const blackMarketOptions = document.querySelectorAll('#blackMarketChoices input[type="checkbox"]');
      const blackMarketSelected = Array.from(blackMarketOptions)
                                        .filter(opt => opt.checked)
                                        .map(opt => opt.value);
      if(blackMarketSelected.length > 0) {
        reportText += `Selected Black Market Items: ${blackMarketSelected.join(', ')}\n`;
      } else {
        reportText += "No Black Market selections.\n";
      }
      
      // عرض التقرير في منطقة التقرير النهائية
      const reportDiv = document.getElementById('reportSection');
      reportDiv.textContent = reportText;
      reportDiv.classList.add('visible');
    }
   async function downloadPDF() {
  const reportDiv = document.getElementById('reportSection');
  if (!reportDiv.classList.contains('visible') || reportDiv.textContent.trim() === "") {
    alert("Please generate the report first before downloading.");
    return;
  }
  
  // سيتم التقاط التقرير كاملاً (بما في ذلك report-header إذا كان ضمن نفس الحاوية)
  const container = document.querySelector("#finalReportContent .main-content");
  const canvas = await html2canvas(container, { scale: 2 }); // زيادة scale لتحسين جودة الصورة
  const imgData = canvas.toDataURL('image/png');
  
  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF('p', 'pt', 'a4');
  const pdfWidth = pdf.internal.pageSize.getWidth();
  const pdfHeight = (canvas.height * pdfWidth) / canvas.width;
  pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
  pdf.save('final_report.pdf');
}

    
    // دالة toggleContent الأصلية: إخفاء جميع الأقسام وعرض القسم المطلوب فقط
    function toggleContent(type) {
      const sections = ["content", "farmingContent", "resourceTransportContent", "eventMonstersContent", "troopTrainingContent", "blackMarket", "finalReportContent"];
      sections.forEach(id => {
        document.getElementById(id).style.display = "none";
      });
      if (type === 'rally') {
        document.getElementById("content").style.display = "flex";
      } else if (type === 'farming') {
        document.getElementById("farmingContent").style.display = "block";
      } else if (type === 'resourceTransport') {
        document.getElementById("resourceTransportContent").style.display = "block";
      } else if (type === 'eventMonsters') {
        populateEventMonsters();
        document.getElementById("eventMonstersContent").style.display = "block";
      } else if (type === 'troopTraining') {
        document.getElementById("troopTrainingContent").style.display = "block";
      } else if (type === 'blackMarket') {
        document.getElementById("blackMarket").style.display = "block";
      } else if (type === 'finalReport') {
        document.getElementById("finalReportContent").style.display = "block";
      }
    }
  </script>
</body>
</html>
